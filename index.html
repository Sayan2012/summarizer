<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>AI Hub — Playground (updated)</title>
<meta name="description" content="Playful hub for small AI tools." />
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg-a:#fbfdff;
    --bg-b:#fff8fb;
    --accent-1: rgba(159,216,196,0.95);
    --accent-2: rgba(157,188,255,0.95);
    --ink:#0f2320;
    --muted:#4f6160;
    --card-radius:20px;
    --capsule-radius:28px;
    --drawer-h:66vh;
    --maxw:1100px;
    --ease:cubic-bezier(.2,.9,.3,1);
  }

  /* subtle animated light gradient background */
  html,body{
    height:100%; margin:0; font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Arial;
    color:var(--ink); -webkit-font-smoothing:antialiased;
    background:
      radial-gradient(600px 300px at 10% 8%, rgba(159,216,196,0.06), transparent 8%),
      radial-gradient(700px 360px at 92% 86%, rgba(157,188,255,0.05), transparent 8%),
      linear-gradient(180deg,var(--bg-a) 0%, var(--bg-b) 100%);
    overflow-y:overlay;
  }
  /* subtle slow color drift for depth */
  @keyframes slow-drift {
    0% { filter: hue-rotate(0deg) saturate(1); }
    50% { filter: hue-rotate(8deg) saturate(1.03); }
    100% { filter: hue-rotate(0deg) saturate(1); }
  }
  body::before{
    content:""; position:fixed; inset:0; pointer-events:none; z-index:0;
    background:linear-gradient(120deg, rgba(255,255,255,0.02), rgba(255,255,255,0.00));
    animation: slow-drift 18s linear infinite;
  }

  *{box-sizing:border-box}
  .wrap{max-width:var(--maxw);margin:36px auto;padding:20px;display:flex;flex-direction:column;gap:18px;align-items:center;position:relative;z-index:1}

  .intro{width:100%; text-align:center; margin-top:6px}
  .title{font-size:2rem;margin:0;font-weight:700;letter-spacing:-0.6px}
  .lead{margin-top:8px;color:var(--muted);font-weight:600;max-width:760px;margin-left:auto;margin-right:auto;line-height:1.4}

  .cluster{display:flex;gap:14px;flex-wrap:wrap;justify-content:center;margin-top:22px;width:100%;padding:18px}
  .capsule{
    background:linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,255,255,0.92));
    border-radius:var(--capsule-radius); padding:16px 20px; min-width:220px; max-width:360px;
    display:flex;gap:12px;align-items:center;cursor:pointer;box-shadow:0 8px 24px rgba(18,24,20,0.06);
    border:1px solid rgba(10,12,12,0.03); transition:transform .18s var(--ease),box-shadow .18s var(--ease);
  }
  .capsule:hover{transform:translateY(-8px);box-shadow:0 26px 60px rgba(18,24,20,0.09)}
  .swatch{width:46px;height:46px;border-radius:12px;flex-shrink:0;display:flex;align-items:center;justify-content:center;font-weight:700;color:#07221a;box-shadow:0 8px 20px rgba(18,24,20,0.06)}
  .sw-mint{background:linear-gradient(135deg,var(--accent-1),#c9f0eb)}
  .sw-sky{background:linear-gradient(135deg,var(--accent-2),#d7e7ff)}
  .sw-rose{background:linear-gradient(135deg,#ffdfe8,#ffc7e0)}
  .cap-main{display:flex;flex-direction:column;gap:4px;flex:1;text-align:left}
  .cap-main h4{margin:0;font-size:1.05rem;font-weight:700}
  .cap-main p{margin:0;color:var(--muted);font-weight:600;font-size:0.92rem}
  .cap-action{margin-left:auto;font-weight:700;color:var(--muted);font-size:0.88rem}

  .help-row{margin-top:10px;color:var(--muted);font-weight:600;font-size:0.92rem}
  .footer{margin-top:26px;color:var(--muted);font-weight:600;font-size:0.92rem}

  /* compact pocket (drawer-like) using classes only */
  .pocket{
    position:fixed;left:50%;transform:translateX(-50%);bottom:18px;
    width:min(960px,96vw); height:72px; border-radius:999px; display:flex; overflow:hidden;
    background:linear-gradient(90deg, rgba(255,255,255,0.98), rgba(250,250,250,0.98));
    box-shadow:0 18px 48px rgba(18,24,20,0.10); border:1px solid rgba(10,12,12,0.04);
    transition: all .34s var(--ease); z-index:1200; pointer-events:auto;
  }
  .pocket.open{ height:var(--drawer-h); border-radius:14px; bottom:28px; }
  .pocket-head{ flex:0 0 78px; display:flex;align-items:center;gap:12px;padding:12px 16px;border-right:1px solid rgba(10,12,12,0.03); }
  .pocket-title{ font-weight:800 }
  .pocket-sub{ color:var(--muted); font-weight:600; font-size:0.9rem }
  .pocket-controls{ display:flex; gap:8px; margin-left:auto; align-items:center }
  .mini-btn{ background:transparent; border:0; font-weight:700; color:var(--muted); cursor:pointer; padding:8px 10px; border-radius:10px }
  .pocket-body{ flex:1; display:flex; flex-direction:column; min-height:0; }
  .pocket-iframe{ flex:1; border:0; width:100%; background:transparent }

  .pocket-close { position:absolute; right:12px; top:10px; background:rgba(255,255,255,0.9); border:0; padding:8px 10px; border-radius:999px; cursor:pointer; font-weight:700; box-shadow:0 8px 20px rgba(18,24,20,0.06); display:none; }
  .pocket.open .pocket-close{ display:block; }

  .tiny-loader{ width:10px; height:10px; border-radius:999px; background:linear-gradient(90deg,#7fd3b3,#8fb7ff); animation:pulse 1.2s infinite; display:none }
  .pocket.open .tiny-loader{ display:block }
  @keyframes pulse{ 0%{ transform:scale(.92); opacity:.7 } 50%{ transform:scale(1.15); opacity:1 } 100%{ transform:scale(.92); opacity:.7 } }

  /* accessible focus visuals */
  .capsule:focus{ outline: 3px solid rgba(143,191,176,0.12); outline-offset:6px; }

  /* responsive tweaks */
  @media (max-width:880px){
    .cluster{ gap:10px }
    .capsule{ min-width:180px; padding:12px 14px }
    .pocket{ width:94vw }
    .pocket-head{ flex:0 0 64px }
  }
</style>
</head>
<body>
  <div class="wrap">
    <section class="intro" aria-labelledby="mainTitle">
      <h1 id="mainTitle" class="title">Playful tools — quick wins</h1>
      <div class="lead">A friendly place for small AI helpers. Click a capsule to open a compact pocket where the tool runs in-page.</div>
    </section>

    <section class="cluster" aria-label="tools cluster">
      <div class="capsule" data-src="https://sayanaiai-aiprojects.hf.space/" tabindex="0" role="button">
        <div class="swatch sw-mint">S</div>
        <div class="cap-main"><h4>Summarizer</h4><p>Make long text short and readable — quick and private.</p></div>
        <div class="cap-action">Try →</div>
      </div>

      <div class="capsule" data-src="" tabindex="0" role="button">
        <div class="swatch sw-sky">P</div>
        <div class="cap-main"><h4>Paraphraser</h4><p>Flip tone & phrasing. (coming)</p></div>
        <div class="cap-action">Soon</div>
      </div>

      <div class="capsule" data-src="" tabindex="0" role="button">
        <div class="swatch sw-rose">T</div>
        <div class="cap-main"><h4>Translator</h4><p>Short context-aware translations. (coming)</p></div>
        <div class="cap-action">Soon</div>
      </div>

      <div class="capsule" data-src="" tabindex="0" role="button">
        <div class="swatch sw-sky">K</div>
        <div class="cap-main"><h4>Keywords</h4><p>Fast phrase extraction for SEO & summaries. (coming)</p></div>
        <div class="cap-action">Soon</div>
      </div>
    </section>

    <div class="help-row">Tip: open a capsule, then expand the pocket to full view with the ⤢ icon.</div>
    <div class="footer">© AI Hub — built for quick experiments</div>
  </div>

  <!-- compact pocket (drawer-like) -->
  <div id="pocket" class="pocket" aria-hidden="true" role="region" aria-label="Tool pocket">
    <div class="pocket-head" role="toolbar" aria-label="Tool pocket header">
      <div style="display:flex;flex-direction:column">
        <div id="pocketTitle" class="pocket-title">Tool</div>
        <div id="pocketSubtitle" class="pocket-sub">Ready</div>
      </div>

      <div class="pocket-controls" id="pocketControls">
        <div class="tiny-loader" id="pocketLoader" aria-hidden="true"></div>
        <button id="expandBtn" class="mini-btn" title="Expand">⤢</button>
        <button id="openTab" class="mini-btn" title="Open in new tab">Open</button>
        <button id="closePocket" class="mini-btn" title="Close">Close</button>
      </div>
    </div>

    <div class="pocket-body">
      <iframe id="pocketFrame" class="pocket-iframe" src="" title="Tool pocket iframe" loading="lazy"></iframe>
      <button id="pocketCloseX" class="pocket-close" aria-hidden="true">Close</button>
    </div>
  </div>

<script>
  const capsules = document.querySelectorAll('.capsule');
  const pocket = document.getElementById('pocket');
  const pocketFrame = document.getElementById('pocketFrame');
  const pocketTitle = document.getElementById('pocketTitle');
  const pocketSubtitle = document.getElementById('pocketSubtitle');
  const openTab = document.getElementById('openTab');
  const closePocket = document.getElementById('closePocket');
  const expandBtn = document.getElementById('expandBtn');
  const pocketLoader = document.getElementById('pocketLoader');
  const pocketCloseX = document.getElementById('pocketCloseX');

  let currentUrl = '';
  let expanded = false;
  let clearSrcTimeout = null;

  function setLoading(on){
    pocketLoader.style.display = on ? 'block' : 'none';
  }

  function openPocket(url, title, subtitle){
    if(!url){
      alert('This tool is coming soon.');
      return;
    }
    // cancel any pending clear
    if(clearSrcTimeout) { clearTimeout(clearSrcTimeout); clearSrcTimeout = null; }

    currentUrl = url;
    pocketTitle.textContent = title || 'Tool';
    pocketSubtitle.textContent = subtitle || '';
    setLoading(true);

    // set iframe src (lazy load) — add one-time load listener
    pocketFrame.src = url;
    pocketFrame.addEventListener('load', function loadedOnce(){
      setLoading(false);
      // try to notify tool it's embedded
      try{ pocketFrame.contentWindow.postMessage({ type:'sa:embedded', value:true }, '*'); }catch(e){}
      pocketFrame.removeEventListener('load', loadedOnce);
    }, { once: true });

    // open pocket via class
    pocket.classList.add('open');
    pocket.setAttribute('aria-hidden','false');
  }

  function closePocketFn(){
    // close visually first
    pocket.classList.remove('open');
    pocket.classList.remove('expanded');
    expanded = false;
    pocket.setAttribute('aria-hidden','true');

    // wait for animation to finish then clear iframe to free resources
    clearSrcTimeout = setTimeout(()=> {
      try{ pocketFrame.src = ''; }catch(e){}
      clearSrcTimeout = null;
    }, 340);
  }

  function toggleExpand(){
    expanded = !expanded;
    if(expanded){
      pocket.classList.add('expanded');
      // expand: make pocket taller by adding extra class; CSS uses .open + .expanded states
      pocket.style.height = '84vh';
      pocketCloseX.setAttribute('aria-hidden','false');
      pocketCloseX.style.display = 'block';
    } else {
      pocket.classList.remove('expanded');
      pocket.style.height = ''; // revert to CSS managed compact height
      pocketCloseX.setAttribute('aria-hidden','true');
      pocketCloseX.style.display = 'none';
    }
  }

  // wire capsules -> open pocket
  capsules.forEach(c => {
    c.addEventListener('click', () => {
      const url = c.dataset.src || '';
      const title = c.querySelector('h4') ? c.querySelector('h4').textContent : 'Tool';
      const sub = c.querySelector('p') ? c.querySelector('p').textContent : '';
      openPocket(url, title, sub);
    });
    c.addEventListener('keydown', e => { if(e.key === 'Enter') c.click(); });
  });

  openTab.addEventListener('click', ()=>{
    if(!currentUrl) return alert('No tool loaded.');
    window.open(currentUrl, '_blank');
  });

  closePocket.addEventListener('click', closePocketFn);
  pocketCloseX.addEventListener('click', closePocketFn);
  expandBtn.addEventListener('click', toggleExpand);

  // ESC closes pocket
  document.addEventListener('keydown', (e) => { if(e.key === 'Escape' && pocket.classList.contains('open')) closePocketFn(); });

  // ensure pocket is hidden to screen readers when closed
  const obs = new MutationObserver(()=> {
    if(pocket.classList.contains('open')) pocket.setAttribute('aria-hidden','false'); else pocket.setAttribute('aria-hidden','true');
  });
  obs.observe(pocket, { attributes:true, attributeFilter:['class'] });

  // initial state
  pocket.classList.remove('open','expanded');
  pocketFrame.src = '';
</script>
</body>
</html>
