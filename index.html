<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>SummarizeAI — Workspace</title>
<meta name="description" content="Minimal workspace for AI tools. Quick input sends text to tools running in the workspace." />
<style>
  :root{
    --bg-dark:#071018; --bg-light:#f7fafc;
    --text-dark:#e6eef6; --text-light:#0b1220;
    --muted-dark:#9fb2c5; --muted-light:#475569;
    --accent:#0ea5ff; --panel: rgba(255,255,255,0.02);
    --radius:12px; --gap:14px; --ease:cubic-bezier(.2,.9,.3,1);
    --sidebar-w:240px; --right-w:300px; --maxw:1320px;
  }
  html.light { --bg:var(--bg-light); --text:var(--text-light); --muted:var(--muted-light); --panel:rgba(2,6,23,0.03); }
  html { --bg:var(--bg-dark); --text:var(--text-dark); --muted:var(--muted-dark); }

  *{box-sizing:border-box}
  body{
    margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial; background:linear-gradient(180deg,#051018 0%,var(--bg) 60%); color:var(--text);
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; min-height:100vh;
  }

  .wrap{max-width:var(--maxw);margin:20px auto;padding:16px;display:flex;flex-direction:column;gap:16px}
  header{display:flex;align-items:center;justify-content:space-between;gap:12px}
  .brand{display:flex;gap:12px;align-items:center}
  .logo{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#60d6b6);display:flex;align-items:center;justify-content:center;color:#04293a;font-weight:700}
  h1{margin:0;font-size:1.05rem}
  .sub{color:var(--muted);font-size:0.9rem}

  /* layout */
  .workspace{display:grid;grid-template-columns:var(--sidebar-w) 1fr var(--right-w);gap:12px;height:calc(100vh - 140px);align-items:stretch}
  .sidebar{background:var(--panel);border-radius:12px;padding:12px;border:1px solid rgba(255,255,255,0.03);display:flex;flex-direction:column;gap:10px;min-height:0}
  .sidebar .section-title{font-weight:700}
  .tool{padding:10px;border-radius:10px;cursor:pointer;border:1px solid rgba(255,255,255,0.02);background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent)}
  .tool:hover{transform:translateY(-6px);box-shadow:0 12px 30px rgba(2,6,23,0.5)}
  .tool small{display:block;color:var(--muted);font-size:0.86rem;margin-top:6px}

  .main{display:flex;flex-direction:column;gap:10px;min-height:0}
  .toolbar{display:flex;gap:8px;align-items:center;padding:8px;border-radius:10px;background:var(--panel);border:1px solid rgba(255,255,255,0.03)}
  .quick{flex:1;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:inherit}
  .btn{padding:10px 12px;border-radius:10px;border:0;cursor:pointer;font-weight:700}
  .btn.primary{background:linear-gradient(90deg,var(--accent),#60a5fa);color:#04293a}
  .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted)}

  .frame-wrap{flex:1;border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,0.03);background:#fff;display:flex;flex-direction:column}
  iframe#frame{flex:1;border:0;width:100%;height:100%;background:transparent}

  .right{background:var(--panel);border-radius:12px;padding:12px;border:1px solid rgba(255,255,255,0.03);display:flex;flex-direction:column;gap:12px;min-height:0;overflow:auto}
  .panel-title{font-weight:700}
  .list{display:flex;flex-direction:column;gap:8px}
  .item{padding:8px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.02);color:var(--muted);cursor:pointer;text-align:left}

  /* small animations */
  .fade{animation:fadeIn .45s ease}
  @keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}

  /* responsive */
  @media (max-width:1100px){ .workspace{grid-template-columns:200px 1fr} .right{display:none} }
  @media (max-width:720px){ .workspace{grid-template-columns:1fr;grid-auto-rows:auto;height:auto} .frame-wrap{height:60vh} }

  /* focus */
  button:focus,input:focus{outline:2px solid rgba(14,165,255,0.12);outline-offset:2px}
</style>
</head>
<body>
  <div class="wrap">
    <header class="fade">
      <div class="brand">
        <div class="logo">SA</div>
        <div>
          <h1>SummarizeAI</h1>
          <div class="sub">Minimal workspace for AI tools</div>
        </div>
      </div>

      <div style="display:flex;gap:8px;align-items:center">
        <button id="themeToggle" class="btn ghost" title="Toggle theme">Theme</button>
        <button id="openToolTab" class="btn ghost" title="Open current tool in new tab">Open</button>
      </div>
    </header>

    <div class="workspace">
      <!-- LEFT: Tools -->
      <aside class="sidebar">
        <div class="section-title">Tools</div>
        <div id="tools" style="display:flex;flex-direction:column;gap:8px;margin-top:8px">
          <div class="tool" data-src="https://sayanaiai-aiprojects.hf.space/" tabindex="0">
            <strong>Summarizer</strong>
            <small>Condense long text into short summaries</small>
          </div>
          <div class="tool" data-src="" tabindex="0">
            <strong>Paraphraser</strong>
            <small>Rewrite with different tone (coming)</small>
          </div>
          <div class="tool" data-src="" tabindex="0">
            <strong>Translator</strong>
            <small>Translate between languages (coming)</small>
          </div>
          <!-- add more tools as you build -->
        </div>

        <div style="margin-top:auto;color:var(--muted);font-size:0.9rem">Pro tip: click a tool to load it in the workspace.</div>
      </aside>

      <!-- CENTER: Quick input + iframe -->
      <main class="main">
        <div class="toolbar">
          <input id="quickInput" class="quick" placeholder="Paste text here and click Send (Ctrl/Cmd+Enter to send)"/>
          <button id="sendBtn" class="btn primary">Send</button>
          <button id="loadBtn" class="btn ghost">Load</button>
        </div>

        <div class="frame-wrap fade" id="frameWrap" aria-live="polite">
          <!-- top small loader area -->
          <div id="frameBar" style="display:flex;align-items:center;justify-content:center;padding:10px;background:var(--panel);border-bottom:1px solid rgba(0,0,0,0.04)">
            <div id="loading" style="display:none;width:28px;height:28px;border-radius:50%;border:3px solid rgba(0,0,0,0.06);border-top-color:var(--accent);animation:spin 1s linear infinite"></div>
            <div id="frameLabel" style="margin-left:8px;color:var(--muted)">No tool loaded</div>
          </div>

          <iframe id="frame" src="" title="Tool workspace"></iframe>
        </div>
      </main>

      <!-- RIGHT: history/snippets -->
      <aside class="right">
        <div class="panel-title">Recent snippets</div>
        <div id="recent" class="list"></div>

        <div style="margin-top:8px" class="panel-title">Saved summaries</div>
        <div id="saved" class="list"></div>
      </aside>
    </div>
  </div>

<script>
/* Config */
const FRAME = document.getElementById('frame');
const FRAME_LABEL = document.getElementById('frameLabel');
const LOADING = document.getElementById('loading');
const tools = document.getElementById('tools');
const quick = document.getElementById('quickInput');
const sendBtn = document.getElementById('sendBtn');
const loadBtn = document.getElementById('loadBtn');
const openToolTab = document.getElementById('openToolTab');
let currentTool = '';
/* localStorage helpers */
function getLS(key, def){ try{return JSON.parse(localStorage.getItem(key) || '[]')}catch(e){return def||[]}}
function setLS(key,val){ localStorage.setItem(key, JSON.stringify(val))}

/* Render recents/saved */
function renderLists(){
  const rec = getLS('sa_recent', []);
  const saved = getLS('sa_saved', []);
  const recentEl = document.getElementById('recent');
  const savedEl = document.getElementById('saved');
  recentEl.innerHTML = ''; savedEl.innerHTML = '';
  rec.forEach((r,i)=>{
    const b = document.createElement('button'); b.className='item'; b.textContent = (r.text.length>80? r.text.slice(0,80)+'…' : r.text);
    b.title = new Date(r.time).toLocaleString();
    b.addEventListener('click', ()=> { quick.value = r.text; quick.focus(); });
    recentEl.appendChild(b);
  });
  saved.forEach((s,i)=>{
    const b = document.createElement('button'); b.className='item'; b.textContent = (s.summary.length>80? s.summary.slice(0,80)+'…' : s.summary);
    b.title = new Date(s.time).toLocaleString();
    b.addEventListener('click', ()=> { /* load summary into quick for editing */ quick.value = s.summary; quick.focus(); });
    savedEl.appendChild(b);
  });
}
renderLists();

/* Tool selection - single click loads into iframe */
tools.addEventListener('click', (ev)=>{
  const card = ev.target.closest('.tool');
  if(!card) return;
  const src = card.dataset.src || '';
  if(!src){ alert('Tool not available yet.'); return; }
  loadToolIntoFrame(src, card);
});

/* Keyboard accessibility: Enter on focused tool */
tools.addEventListener('keydown', (ev)=>{
  if(ev.key === 'Enter'){
    const card = ev.target.closest('.tool') || document.activeElement;
    if(card && card.dataset){ const s = card.dataset.src; if(s) loadToolIntoFrame(s, card); }
  }
});

/* Load tool helper */
function loadToolIntoFrame(src, card){
  currentTool = src;
  FRAME.src = src;
  FRAME_LABEL.textContent = 'Loading…';
  LOADING.style.display = 'inline-block';
  openToolTab.onclick = ()=> window.open(src, '_blank');
  addRecent(src);
}

/* When iframe loads */
FRAME.addEventListener('load', ()=> {
  LOADING.style.display = 'none';
  FRAME_LABEL.textContent = (currentTool) ? new URL(currentTool).hostname : 'Tool loaded';
  // tell the tool it is embedded and send theme
  try{ FRAME.contentWindow.postMessage({type:'sa:embedded', value:true}, '*'); }catch(e){}
  sendTheme(); // send current theme
});

/* Quick input send */ 
function addRecentSnippet(text){
  if(!text) return;
  const list = getLS('sa_recent', []);
  list.unshift({time:Date.now(), text});
  setLS('sa_recent', list.slice(0,20));
  renderLists();
}

sendBtn.addEventListener('click', ()=>{
  const t = quick.value.trim();
  if(!t) return alert('Paste some text to send.');
  addRecentSnippet(t);
  // try to postMessage to iframe
  if(FRAME && FRAME.contentWindow && currentTool){
    try{
      FRAME.contentWindow.postMessage({type:'summarizer:prefill', text:t}, '*');
      // optionally auto-run by sending a command; depends on tool implementation
      // FRAME.contentWindow.postMessage({type:'summarizer:run'}, '*');
    }catch(e){
      window.open(currentTool, '_blank');
    }
  } else {
    // no tool loaded -> open summarizer in new tab with text as ?text= param
    const encoded = encodeURIComponent(t);
    window.open(currentTool || 'https://sayanaiai-aiprojects.hf.space/' + `?text=${encoded}`, '_blank');
  }
});

/* quick keyboard: Ctrl/Cmd+Enter to send */
document.addEventListener('keydown', (e)=> {
  if((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
    e.preventDefault();
    sendBtn.click();
  }
});

/* LoadBtn: load first visible tool */
loadBtn.addEventListener('click', ()=>{
  const first = document.querySelector('.tool[data-src]:not([data-src=""])');
  if(first) loadToolIntoFrame(first.dataset.src, first);
  else alert('No tool URL configured.');
});

/* Recent add for tool load */
function addRecent(src){
  if(!src) return;
  const list = getLS('sa_tool_recent', []);
  list.unshift({time:Date.now(), tool:src});
  setLS('sa_tool_recent', list.slice(0,20));
  // optionally render a tool history UI...
}

/* Theme toggle + persist + inform iframe */
const themeToggle = document.getElementById('themeToggle');
themeToggle.addEventListener('click', ()=>{
  document.documentElement.classList.toggle('light');
  localStorage.setItem('sa_theme', document.documentElement.classList.contains('light') ? 'light' : 'dark');
  sendTheme();
});
(function restoreTheme(){ if(localStorage.getItem('sa_theme')==='light') document.documentElement.classList.add('light'); })();

function sendTheme(){
  try{ FRAME.contentWindow.postMessage({type:'sa:theme', theme: document.documentElement.classList.contains('light') ? 'light' : 'dark'}, '*'); }catch(e){}
}

/* Listen for messages from tools (optional) */
window.addEventListener('message', (ev)=>{
  const d = ev.data || {};
  if(!d || typeof d !== 'object') return;
  if(d.type === 'sa:save' && d.summary){
    // tool asks host to save a summary
    const saved = getLS('sa_saved', []);
    saved.unshift({time:Date.now(), summary: d.summary});
    setLS('sa_saved', saved.slice(0,40));
    renderLists();
    alert('Summary saved to workspace.');
  }
}, false);

/* Open current tool in tab button */
openToolTab.addEventListener('click', ()=>{
  if(!currentTool) return alert('No tool loaded.');
  window.open(currentTool, '_blank');
});

/* restore lists on load */
renderLists();
</script>
</body>
</html>
