<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>AI Hub — Playground (centered modal)</title>
<meta name="description" content="Playful hub for small AI tools." />
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg-a:#fbfdff;
    --bg-b:#fff8fb;
    --accent-1: rgba(159,216,196,0.95);
    --accent-2: rgba(157,188,255,0.95);
    --ink:#0f2320;
    --muted:#4f6160;
    --card-radius:20px;
    --capsule-radius:28px;
    --maxw:1100px;
    --ease:cubic-bezier(.2,.9,.3,1);
    --modal-w: min(1280px, 95vw);
    --modal-h: 90vh;
  }

  /* subtle animated light gradient background */
  html,body{
    height:100%; margin:0; font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Arial;
    color:var(--ink); -webkit-font-smoothing:antialiased;
    background:
      radial-gradient(600px 300px at 10% 8%, rgba(159,216,196,0.06), transparent 8%),
      radial-gradient(700px 360px at 92% 86%, rgba(157,188,255,0.05), transparent 8%),
      linear-gradient(180deg,var(--bg-a) 0%, var(--bg-b) 100%);
  }
  @keyframes slow-drift {
    0% { filter: hue-rotate(0deg) saturate(1); }
    50% { filter: hue-rotate(6deg) saturate(1.02); }
    100% { filter: hue-rotate(0deg) saturate(1); }
  }
  body::before{
    content:""; position:fixed; inset:0; pointer-events:none; z-index:0;
    background:linear-gradient(120deg, rgba(255,255,255,0.02), rgba(255,255,255,0.00));
    animation: slow-drift 24s linear infinite;
  }

  *{box-sizing:border-box}
  .wrap{max-width:var(--maxw);margin:36px auto;padding:20px;display:flex;flex-direction:column;gap:18px;align-items:center;position:relative;z-index:1}

  .intro{width:100%; text-align:center; margin-top:6px}
  .title{font-size:2rem;margin:0;font-weight:700;letter-spacing:-0.6px}
  .lead{margin-top:8px;color:var(--muted);font-weight:600;max-width:760px;margin-left:auto;margin-right:auto;line-height:1.4}

  .cluster{display:flex;gap:14px;flex-wrap:wrap;justify-content:center;margin-top:22px;width:100%;padding:18px}
  .capsule{
    background:linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,255,255,0.92));
    border-radius:var(--capsule-radius); padding:16px 20px; min-width:220px; max-width:360px;
    display:flex;gap:12px;align-items:center;cursor:pointer;box-shadow:0 8px 24px rgba(18,24,20,0.06);
    border:1px solid rgba(10,12,12,0.03); transition:transform .18s var(--ease),box-shadow .18s var(--ease);
  }
  .capsule:hover{transform:translateY(-8px);box-shadow:0 26px 60px rgba(18,24,20,0.09)}
  .swatch{width:46px;height:46px;border-radius:12px;flex-shrink:0;display:flex;align-items:center;justify-content:center;font-weight:700;color:#07221a;box-shadow:0 8px 20px rgba(18,24,20,0.06)}
  .sw-mint{background:linear-gradient(135deg,var(--accent-1),#c9f0eb)}
  .sw-sky{background:linear-gradient(135deg,var(--accent-2),#d7e7ff)}
  .sw-rose{background:linear-gradient(135deg,#ffdfe8,#ffc7e0)}
  .cap-main{display:flex;flex-direction:column;gap:4px;flex:1;text-align:left}
  .cap-main h4{margin:0;font-size:1.05rem;font-weight:700}
  .cap-main p{margin:0;color:var(--muted);font-weight:600;font-size:0.92rem}
  .cap-action{margin-left:auto;font-weight:700;color:var(--muted);font-size:0.88rem}

  .help-row{margin-top:10px;color:var(--muted);font-weight:600;font-size:0.92rem}
  .footer{margin-top:26px;color:var(--muted);font-weight:600;font-size:0.92rem}

  /* centered modal */
  .backdrop {
    position:fixed; inset:0; background:rgba(8,10,12,0.32); display:none; align-items:center; justify-content:center; z-index:1400;
    -webkit-backdrop-filter: blur(6px); backdrop-filter: blur(6px);
  }
  .backdrop.open { display:flex; }

  .modal {
    width: var(--modal-w);
    height: var(--modal-h);
    max-height: 92vh;
    background: linear-gradient(180deg, #ffffff, #fbfbff);
    border-radius:14px;
    box-shadow: 0 40px 120px rgba(10,14,18,0.18);
    border:1px solid rgba(10,12,12,0.06);
    overflow:hidden; display:flex; flex-direction:column; transform: translateY(6px) scale(0.98); opacity:0; transition: transform .28s var(--ease), opacity .28s var(--ease);
  }
  .backdrop.open .modal { transform: translateY(0) scale(1); opacity:1; }

  .modal-head { display:flex; align-items:center; justify-content:space-between; gap:12px; padding:12px 16px; border-bottom:1px solid rgba(0,0,0,0.04) }
  .modal-title { font-weight:800 }
  .modal-controls { display:flex; gap:8px; align-items:center }

  .mini-btn { background:transparent; border:0; font-weight:700; color:var(--muted); cursor:pointer; padding:8px 10px; border-radius:10px }

  .modal-body { flex:1; display:flex; min-height:0; }
  .modal-iframe { flex:1; border:0; width:100%; background:transparent }

  .modal-side { width:320px; border-left:1px solid rgba(0,0,0,0.04); padding:14px; display:flex; flex-direction:column; gap:12px; background:linear-gradient(180deg, rgba(255,255,255,0.98), rgba(250,250,255,0.98)); }

  .tiny-loader { width:10px; height:10px; border-radius:999px; background:linear-gradient(90deg,#7fd3b3,#8fb7ff); animation: pulse 1.2s infinite; display:none }
  @keyframes pulse { 0%{ transform:scale(.9); opacity:.7 } 50%{ transform:scale(1.15); opacity:1 } 100%{ transform:scale(.9); opacity:.7 } }

  /* keep a single close button (text) in header; remove other buttons */
  .modal-close { display:none; }

  /* accessible focus visuals */
  .capsule:focus{ outline: 3px solid rgba(143,191,176,0.12); outline-offset:6px; }

  /* responsive */
  @media (max-width:920px){
    .modal { width: 94vw; height: 78vh; }
    .modal-side { display:none; }
  }
</style>
</head>
<body>
  <div class="wrap">
    <section class="intro" aria-labelledby="mainTitle">
      <h1 id="mainTitle" class="title">Playful tools — quick wins</h1>
      <div class="lead">A friendly place for small AI helpers. Click a capsule to open the tool as a floating window in the middle of the page.</div>
    </section>

    <section class="cluster" aria-label="tools cluster">
      <div class="capsule" data-src="https://sayanaiai-aiprojects.hf.space/" tabindex="0" role="button">
        <div class="swatch sw-mint">S</div>
        <div class="cap-main"><h4>Summarizer</h4><p>Make long text short and readable — quick and private.</p></div>
        <div class="cap-action">Try →</div>
      </div>

      <div class="capsule" data-src="" tabindex="0" role="button">
        <div class="swatch sw-sky">P</div>
        <div class="cap-main"><h4>Paraphraser</h4><p>Flip tone & phrasing. (coming)</p></div>
        <div class="cap-action">Soon</div>
      </div>

      <div class="capsule" data-src="" tabindex="0" role="button">
        <div class="swatch sw-rose">T</div>
        <div class="cap-main"><h4>Translator</h4><p>Short context-aware translations. (coming)</p></div>
        <div class="cap-action">Soon</div>
      </div>

      <div class="capsule" data-src="" tabindex="0" role="button">
        <div class="swatch sw-sky">K</div>
        <div class="cap-main"><h4>Keywords</h4><p>Fast phrase extraction for SEO & summaries. (coming)</p></div>
        <div class="cap-action">Soon</div>
      </div>
    </section>

    <div class="help-row">Tip: click a capsule — the tool opens as a floating window you can close.</div>
    <div class="footer">© AI Hub — built for quick experiments</div>
  </div>

  <!-- centered modal (reverted layout) -->
  <div id="backdrop" class="backdrop" aria-hidden="true" role="dialog" aria-label="Tool window">
    <div class="modal" role="document" aria-modal="true">
      <div class="modal-head">
        <div style="display:flex;flex-direction:column">
          <div id="modalTitle" class="modal-title">Tool</div>
          <div id="modalSub" style="color:var(--muted);font-weight:600;font-size:0.92rem">Ready</div>
        </div>

        <div class="modal-controls">
          <div class="tiny-loader" id="modalLoader" aria-hidden="true"></div>
          <!-- KEEP ONLY ONE close button here (text). removed "Open in tab" and the extra X -->
          <button id="closeModal" class="mini-btn" title="Close">Close</button>
        </div>
      </div>

      <div class="modal-body">
        <iframe id="modalFrame" class="modal-iframe" src="" title="Tool iframe" loading="lazy"></iframe>

        <aside class="modal-side" aria-hidden>
          <h4 id="modalName">Tool</h4>
          <p id="modalDesc" style="color:var(--muted)">Quick info and shortcuts appear here.</p>

          <div style="margin-top:auto;color:var(--muted);font-size:0.9rem">Tip: press ESC to close</div>
        </aside>
      </div>

      <!-- removed the floating X button -->
    </div>
  </div>

<script>
  // Behavior: centered modal (previous version), keep only one close button.
  const capsules = document.querySelectorAll('.capsule');
  const backdrop = document.getElementById('backdrop');
  const modal = document.querySelector('.modal');
  const modalFrame = document.getElementById('modalFrame');
  const modalTitle = document.getElementById('modalTitle');
  const modalSub = document.getElementById('modalSub');
  const modalName = document.getElementById('modalName');
  const modalDesc = document.getElementById('modalDesc');
  const closeModalBtn = document.getElementById('closeModal');
  const modalLoader = document.getElementById('modalLoader');

  let currentUrl = '';
  let clearTimeoutId = null;

  function setLoading(on){
    modalLoader.style.display = on ? 'block' : 'none';
  }

  function openModal(url, title, subtitle){
    if(!url){ alert('This tool is coming soon.'); return; }
    if(clearTimeoutId){ clearTimeout(clearTimeoutId); clearTimeoutId = null; }

    currentUrl = url;
    modalTitle.textContent = title || 'Tool';
    modalSub.textContent = subtitle || '';
    modalName.textContent = title || 'Tool';
    modalDesc.textContent = subtitle || '';

    setLoading(true);
    modalFrame.src = url;
    modalFrame.addEventListener('load', function onLoad(){
      setLoading(false);
      try{ modalFrame.contentWindow.postMessage({ type:'sa:embedded', value:true }, '*'); }catch(e){}
      modalFrame.removeEventListener('load', onLoad);
    }, { once: true });

    backdrop.classList.add('open');
    backdrop.setAttribute('aria-hidden','false');

    // focus the close button for a11y
    setTimeout(()=> closeModalBtn.focus(), 250);
  }

  function closeModal(){
    backdrop.classList.remove('open');
    backdrop.setAttribute('aria-hidden','true');

    // clear iframe after modal close animation (to free resources)
    clearTimeoutId = setTimeout(()=> {
      try{ modalFrame.src = ''; }catch(e){}
      clearTimeoutId = null;
    }, 340);
    currentUrl = '';
  }

  capsules.forEach(c => {
    c.addEventListener('click', () => {
      const url = c.dataset.src || '';
      const title = c.querySelector('h4') ? c.querySelector('h4').textContent : 'Tool';
      const sub = c.querySelector('p') ? c.querySelector('p').textContent : '';
      openModal(url, title, sub);
    });
    c.addEventListener('keydown', (e) => { if(e.key === 'Enter') c.click(); });
  });

  closeModalBtn.addEventListener('click', closeModal);

  // backdrop click closes when clicking outside modal
  backdrop.addEventListener('click', (e)=> {
    if(e.target === backdrop) closeModal();
  });

  // ESC to close
  document.addEventListener('keydown', (e) => {
    if(e.key === 'Escape' && backdrop.classList.contains('open')) closeModal();
  });

  // accessibility: reflect open state for screen readers
  const obs = new MutationObserver(()=> {
    if(backdrop.classList.contains('open')) backdrop.setAttribute('aria-hidden','false'); else backdrop.setAttribute('aria-hidden','true');
  });
  obs.observe(backdrop, { attributes:true, attributeFilter:['class'] });

  // initial state
  backdrop.classList.remove('open');
  modalFrame.src = '';
  setLoading(false);
</script>
</body>
</html>
